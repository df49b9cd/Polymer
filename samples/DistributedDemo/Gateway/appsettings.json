{
  "omnirelay": {
    "service": "distributed.gateway",
    "logging": {
      "level": "Information",
      "overrides": {
        "DistributedDemo": "Debug",
        "Microsoft": "Warning"
      }
    },
    "inbounds": {
      "http": [
        {
          "name": "http-gateway",
          "urls": [ "http://0.0.0.0:5080" ]
        }
      ]
    },
    "outbounds": {
      "inventory": {
        "unary": {
          "grpc": [
            {
              "addresses": [
                "http://inventory-primary:6101",
                "http://inventory-secondary:6101"
              ],
              "remoteService": "inventory",
              "peerChooser": "fewest-pending"
            }
          ]
        }
      },
      "audit": {
        "oneway": {
          "http": [
            {
              "url": "http://audit:6080/yarpc/v1/audit::record"
            }
          ]
        }
      }
    },
    "middleware": {
      "inbound": {
        "unary": [
          "OmniRelay.Core.Middleware.RpcTracingMiddleware, OmniRelay",
          "OmniRelay.Core.Middleware.RpcMetricsMiddleware, OmniRelay"
        ],
        "oneway": [
          "OmniRelay.Core.Middleware.RpcTracingMiddleware, OmniRelay",
          "OmniRelay.Core.Middleware.RpcMetricsMiddleware, OmniRelay"
        ]
      },
      "outbound": {
        "unary": [
          "OmniRelay.Core.Middleware.RetryMiddleware, OmniRelay",
          "OmniRelay.Core.Middleware.RpcMetricsMiddleware, OmniRelay"
        ]
      }
    },
    "diagnostics": {
      "runtime": {
        "enableControlPlane": true,
        "enableLoggingLevelToggle": true,
        "enableTraceSamplingToggle": true
      },
      "openTelemetry": {
        "enabled": true,
        "serviceName": "gateway",
        "enableMetrics": true,
        "prometheus": {
          "enabled": true,
          "scrapeEndpointPath": "/omnirelay/metrics"
        },
        "otlp": {
          "enabled": true,
          "endpoint": "http://otel-collector:4317",
          "protocol": "Grpc"
        }
      }
    }
  }
}
